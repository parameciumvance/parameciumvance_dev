# TROUBLESHOOT

###### tags: `開發`

* 檔案內容沒變但狀態是modified
檢查git diff 出現old mode 100755 new mode 100644
**原因:** unix 檔案類型權限 755=rwxr-xr-x, 644=rw-r--r--
**Sol:** 修改git配置 (git config core.filemode false)

* ImportError: libcublas.so.9.0: cannot open shared object file
**原因:** 套件(torch)版本和先前編譯C-file時不同
**Sol:** C-file要重新編譯(移除build資料夾重新跑setup.py)

* conda env下用pip裝包一直裝不到正確位置
**原因:** conda的pip被bashrc裡alias pip=pip3覆蓋
**Sol:** alias還是別亂用

* undefined symbol: _ZN2cv8fastFreeEPv
**原因:** 沒有連結到opencv的庫
**Sol:** (2020.2.5)

* cv namespace undefined reference
**原因:** opencv版本問題
**Sol:** include<cv.h>改include<cv.hpp> 
         用imread時g++LIB參數要加入-lopencv_imgproc (2020.2.6)

* VScode的移到定義選項消失
**原因:** ？？？
**Sol:** 把開啟的頁面全關掉後重開即可 （2020.2.13）

* 核心已傾印/程式記憶體區段錯誤
**原因:** 常是粗心使用了錯誤的addr
**Sol:** 仔細檢查
-- std::array建構時輸入的元素數量和設定不符 

* C++ with opencv編譯/連結失敗
**原因:** 
**Sol:** 注意opencv標頭檔路徑和lib路徑一致,還有確認版本 (2020.4.1) 另外虛擬環境的opencv lib有問題（謎）cmake時要退出環境

* python腳本中還沒執行的部份確影響結果
**原因:** 函數中只要偵測到指定變數的行為就會使變數從global變local（無法取得global值）
**Sol:** 避免使用global變數吧

* apt install失敗,出現"保留了損毀版本"
**原因:** 關閉了ubuntu update,自動找的版本(舊)可能和既有的軟體(新)衝突
**Sol:** 把update選項開回來（只是加上搜尋目標,跟是否自動更新是兩件事）

* 重開機後變指令界面
**原因:** 嘗試某些降版操作導致圖形界面異常
**Sol:** 重裝即可 sudo apt-get install --reinstall ubuntu-desktop

* 圖片或檔案無法開啟
**可能原因:** 檔案是否都只有約130k?那可能是由於源碼庫是用git-lfs儲存,要用git lfs pull把檔案也復原

# 編譯坑

確定有抓完整倉庫（--recursive）
中文路徑會有坑,空白和括號也是
gcc/g++ version(6/7/8)
c++讀c函式庫 （extern C）

sudo (安裝到系統路徑時)

-gcc
nvcc(cuda compiler)會要求gcc版本(cuda10.0:gcc<=7)
(參考 cuda-10.0/include/crt/host_config.h:129)

* xxx not declared
**可能原因:** 舊版GCC(4)可以不顯式宣告,更新後以前可以編譯的舊專案重新編譯時可能因此出錯